<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Waffle chart is a pie chart that visually represents abundances with the number of squares.
The waffle chart consists of squares plotted on a rectangular lattice according to a design
matrix that is constructed from a vector of abundances or can be provided directly."><title>Make a waffle chart. — waffle • baffle</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Make a waffle chart. — waffle"><meta property="og:description" content="Waffle chart is a pie chart that visually represents abundances with the number of squares.
The waffle chart consists of squares plotted on a rectangular lattice according to a design
matrix that is constructed from a vector of abundances or can be provided directly."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">baffle</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/baffle.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/j-moravec/baffle/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Make a waffle chart.</h1>
      <small class="dont-index">Source: <a href="https://github.com/j-moravec/baffle/blob/HEAD/R/waffle.r" class="external-link"><code>R/waffle.r</code></a></small>
      <div class="d-none name"><code>waffle.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Waffle chart is a pie chart that visually represents abundances with the number of squares.
The waffle chart consists of squares plotted on a rectangular lattice according to a design
matrix that is constructed from a vector of abundances or can be provided directly.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">waffle</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  f <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  nrow <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ncol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  byrow <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  from <span class="op">=</span> <span class="st">"bottomleft"</span>,</span>
<span>  stacked <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  gap <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  horiz <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  add <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">waffle.mat</span><span class="op">(</span><span class="va">x</span>, f <span class="op">=</span> <span class="va">square</span>, <span class="va">...</span>, add <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">design</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  nrow <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ncol <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  byrow <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  from <span class="op">=</span> <span class="st">"bottomleft"</span>,</span>
<span>  stacked <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  horiz <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  gap <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>a vector of abundances or a design matrix (see details)</p></dd>


<dt>f</dt>
<dd><p>**optional** a shape function (see details)</p></dd>


<dt>...</dt>
<dd><p>**optional** other parameters passed to the `f` function</p></dd>


<dt>nrow</dt>
<dd><p>**optional** the number of rows</p></dd>


<dt>ncol</dt>
<dd><p>**optional** the number of columns</p></dd>


<dt>byrow</dt>
<dd><p>**optional** fill matrix by rows or by columns</p></dd>


<dt>from</dt>
<dd><p>**optional** starting position from which the matrix is filled, one of
"bottomleft", "bottomright", "topleft" or "topright".</p></dd>


<dt>stacked</dt>
<dd><p>**optional** if FALSE, produce an unstacked waffle chart, see details</p></dd>


<dt>gap</dt>
<dd><p>**optional** gap between unstacked subwaffles, works only for unstacked waffle charts</p></dd>


<dt>horiz</dt>
<dd><p>**optional** if FALSE, vertical instead of horizontal waffle chart is produced,
works only for unstacked waffle charts</p></dd>


<dt>add</dt>
<dd><p>**optional** whether to add to a current plot</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>`design()` returns a design matrix (see details), in addition, if `x` is a named vector,
  the names are preserved in the `levels` attribute.
  `waffle()` and `waffle.mat()` do not have a return value</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The `waffle()` function accepts a vector of abundances and plots a waffle chart.
This is done by first constructing a design matrix using the `design()` function,
which is then parsed to the `waffle.mat()` function.</p>
<p>The `design()` functions construct a design matrix according.
The design matrix is filled by an integer vector derived from the abundance vector `x`.
Each integer correspond to the order of abundances in `x`, with the quantity equal to the value
in `x`. This means that for the `x=c(3,5)`, the design matrix will be filled with three `1`
and five `2`, all other cells of the design matrix are set as unknown values `NA`.</p>
<p>By default, the design matrix is filled by row, starting from the bottom left corner,
this can be changed by setting the variables `byrow` and `from`.
By setting `byrow=FALSE`, the matrix is filled by columns first.</p>
<p>If `ncol` or `nrow` is not specified, a squared matrix that will fit the sum of abundances
will be constructed.</p>
<p>By default, the design matrix is stacked, i.e., all the elements are placed in a single
matrix object, similarly how barplot produces stacked lines. By specifying `stack=FALSE`,
the `design()` unstacks the elements, each are then placed in their own matricies, which
are then connected by `NA` elements of size `gap`. More complex</p>
<p>If the input vector `x` is a named vector, the names are preserved in the `levels`
attribute. These levels are not currently used, but might be used in the future
for automatic legend creation and subsetting.</p>
<p>The function `waffle.mat()` accepts a custom-made design matrix and thus allows a better
control of colored regions. It is called internally by the `waffle()` function, which serves
as an easy to use interface for the `waffle.mat()`. For this reason, the `waffle.mat()`
does not checks for the validity of input arguments and does not set a default colors.</p>
<p>The assumed and allocated coordinate system is from `0` to `ncol` for x and
from `0` to `ncol` for y. Squares are filled from top right corner of this coordinate
system.</p>
<p>If `add=FALSE`, a new window with a fixed aspect ratio x/y=1 is allocated so that
plotted polygons are squares (by default). This might cause the plot margins,
and thus the main title, to be quite far away. In this case, plotting the title using `text()`
instead of `title()` might be a better idea. In this case, the coordinates might be:
<code>text(x=(ncol+2)/2, y=nrow+1,...)</code></p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>the `waffle` package for a `ggplot2` version.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">waffle</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">50</span>,<span class="fl">25</span>,<span class="fl">25</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="waffle-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">waffle</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>,<span class="fl">75</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"darkorchid"</span>, <span class="st">"lightgray"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="waffle-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">waffle</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">14</span>,<span class="fl">8</span>,<span class="fl">4</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="waffle-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># custom design matrix with a more complex structure</span></span></span>
<span class="r-in"><span><span class="va">cols</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette.colors</a></span><span class="op">(</span><span class="fl">3</span>, <span class="st">"Set 1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">design_mat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="fl">7</span>,<span class="fl">10</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">design_mat</span><span class="op">[</span><span class="fl">1</span>,<span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="va">design_mat</span><span class="op">[</span><span class="fl">2</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">8</span><span class="op">]</span> <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="va">design_mat</span><span class="op">[</span><span class="fl">4</span>,<span class="op">]</span> <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="va">design_mat</span><span class="op">[</span><span class="fl">5</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">]</span> <span class="op">=</span> <span class="fl">2</span></span></span>
<span class="r-in"><span><span class="va">design_mat</span><span class="op">[</span><span class="fl">7</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span> <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="fu">waffle.mat</span><span class="op">(</span><span class="va">design_mat</span>, col<span class="op">=</span><span class="va">cols</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="waffle-4.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Jiří Moravec.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

