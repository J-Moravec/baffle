<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="baffle">
<title>Introduction to baffle • baffle</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to baffle">
<meta property="og:description" content="baffle">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">baffle</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/baffle.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/j-moravec/baffle/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="baffle_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Introduction to baffle</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/j-moravec/baffle/blob/HEAD/vignettes/baffle.Rmd" class="external-link"><code>vignettes/baffle.Rmd</code></a></small>
      <div class="d-none name"><code>baffle.Rmd</code></div>
    </div>

    
    
<p>The package <code>baffle</code> stands for <code>base waffle</code> implements waffle charts in base R graphics. Waffles are square pie charts that visualize relative quantities using colored squares. Modern waffles charts are not limited to squares and use various dimensions and symbols.</p>
<div class="section level2">
<h2 id="basic-waffles">Basic waffles<a class="anchor" aria-label="anchor" href="#basic-waffles"></a>
</h2>
<p>The <code><a href="../reference/waffle.html">baffle::waffle</a></code> accepts a vector of abundancies <code>x</code> and constructs waffle chart accordingly. The vector of abundancies must be a numeric integer vector. For example, if we wish to visualize the difference between <code>3</code> apples and <code>8</code> oranges, all we need to type is:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">8</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="baffle_files/figure-html/unnamed-chunk-3-1.png" width="700"></p>
<p>By default, <code>waffle</code> tries to create a square matrices and uses the categorical <code>Set 1</code> palette, if there are 9 or less objects, and the continuous <code>Zissou</code> palette otherwise. Colors and dimensions can be specified specifying the <code>col</code>, <code>nrow</code> and <code>ncol</code> arguments.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">75</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"red"</span>, <span class="st">"gray"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">75</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"blue"</span>, <span class="st">"gray"</span><span class="op">)</span>, ncol<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">75</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"darkgreen"</span>, <span class="st">"gray"</span><span class="op">)</span>, nrow<span class="op">=</span><span class="fl">5</span><span class="op">)</span></span></code></pre></div>
<p><img src="baffle_files/figure-html/unnamed-chunk-4-1.png" width="700"></p>
<p><code>baffle</code> fills the waffle by rows from the bottomleft corner. To change this, you can specify the <code>byrow</code> and <code>from</code> arguments:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">12</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"darkorchid"</span>, <span class="st">"gray"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>, <span class="fl">12</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"skyblue"</span>, <span class="st">"gray"</span><span class="op">)</span>, from<span class="op">=</span><span class="st">"topright"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>,<span class="fl">12</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tomato"</span>, <span class="st">"gray"</span><span class="op">)</span>, byrow<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">13</span>,<span class="fl">12</span><span class="op">)</span>, col<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"springgreen"</span>, <span class="st">"gray"</span><span class="op">)</span>, from<span class="op">=</span><span class="st">"bottomright"</span>, byrow<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p><img src="baffle_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
<div class="section level3">
<h3 id="workhorse-functions">Workhorse functions<a class="anchor" aria-label="anchor" href="#workhorse-functions"></a>
</h3>
<p>Waffles in <code>baffle</code> are created by three basic functions:</p>
<p><code>waffle</code> allows one to plot waffles directly, as demonstrated above. It constructs the waffle matrix using the <code>design</code> function and then plots the waffle matrix with the <code>waffle.mat</code> function. In most cases, <code>waffle</code> is all one needs.</p>
<p><code>design</code> is a function responsible for transforming the vector of abundances into a waffle matrix. Waffle matrix is a matrix of integers, each integer corresponds to the item in the abundance vector, with empty cells having value <code>NA</code>. Design is used internally by the <code>waffle</code> function, or it can be used directly create a design matrix that can be then modified, such as to merge multiple design matrices.</p>
<p><code>waffle.mat</code> is the function responsible for plotting the waffle matrix. The matrix is transformed into a grid and a square corresponding to each cell of the matrix is plotted at each point of the grid. <code>waffle.mat</code> expect a matrix in the format produced by <code>design</code>, but custom matrices can be provided as well.</p>
</div>
</div>
<div class="section level2">
<h2 id="unstacked-waffles">Unstacked Waffles<a class="anchor" aria-label="anchor" href="#unstacked-waffles"></a>
</h2>
<p>Traditional waffles are squared pie charts are used to display proportion of some whole. Some modern examples use waffles as bar charts, there the waffles are “unstacked” and abundance of each element is displayed side by side.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cyl</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="va">cyl</span>, stacked<span class="op">=</span><span class="cn">FALSE</span>, gap<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"top"</span>, horiz<span class="op">=</span><span class="cn">TRUE</span>, bty<span class="op">=</span><span class="st">"n"</span>, inset<span class="op">=</span><span class="fl">0.9</span>, xpd<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>    legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, cex<span class="op">=</span><span class="fl">2</span>,</span>
<span>    fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette.colors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, <span class="st">"Set 1"</span><span class="op">)</span>, border<span class="op">=</span><span class="cn">NA</span>,</span>
<span>    title<span class="op">=</span><span class="st">"Number of cylinders\n in 'mtcars'"</span>, title.font<span class="op">=</span><span class="fl">2</span>, title.cex<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="baffle_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="squares-circles-polygons">Squares, Circles, Polygons<a class="anchor" aria-label="anchor" href="#squares-circles-polygons"></a>
</h2>
<p>Waffle plots are typically represented by coloured squares. Many modern examples favour different shapes to make themselves more graphically distinct. The <code>waffle</code> function is flexible and accepts a plotting function. Any function will do as long as it accepts <code>x</code> and <code>y</code> coordinates and the diameter of plotted object is slightly smaller than one.</p>
<p><code>baffle</code> comes with several of such functions, the default <code>square</code>, <code>rectangle</code>, <code>circle</code>, <code>ellipse</code>, regular convex polygon <code>rcpoly</code>. See <code><a href="../reference/Shapes.html">?Shapes</a></code> for more information. These functions are similar to the <code><a href="https://rdrr.io/r/graphics/symbols.html" class="external-link">graphics::symbols()</a></code>.</p>
<p>These functions are vectorised, in fact even the <code>f</code> argument in the <code>waffle</code> is vectorised, so multiple polygons can be plotted effortesly.</p>
<p>For example, we can represent the number of cylinders in the above example with regular n-sided polygons.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cyl</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="va">cyl</span>, stacked<span class="op">=</span><span class="cn">FALSE</span>, gap<span class="op">=</span><span class="fl">1</span>, f<span class="op">=</span><span class="va">rcpoly</span>, n<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"top"</span>, horiz<span class="op">=</span><span class="cn">TRUE</span>, bty<span class="op">=</span><span class="st">"n"</span>, inset<span class="op">=</span><span class="fl">0.9</span>, xpd<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>    legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, cex<span class="op">=</span><span class="fl">2</span>,</span>
<span>    fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette.colors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, <span class="st">"Set 1"</span><span class="op">)</span>, border<span class="op">=</span><span class="cn">NA</span>,</span>
<span>    title<span class="op">=</span><span class="st">"Number of cylinders\n in 'mtcars'"</span>, title.font<span class="op">=</span><span class="fl">2</span>, title.cex<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="baffle_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>Shame that the <code>legend</code> does not allow for such flexibility!</p>
</div>
<div class="section level2">
<h2 id="text-and-points">Text and Points<a class="anchor" aria-label="anchor" href="#text-and-points"></a>
</h2>
<p>As noted above, any function that prints to <code>x</code> and <code>y</code> coordinates can be used! The <code>base</code> functions <code>points</code> and <code>text</code> are already conforming and can be readily used.</p>
<p>Only setting their size can be a bit problematic. <code>1/strheight(s)</code> and <code>1/strwidth(s)</code> is the most answer, but these can be called only <em>after</em> the plotting window is defined. So one has to either check multiple values and select the most fitting one, which would be <code>4</code> in this example, or write a wrapper around <code>text</code> that calculates the label dimensions and selects the appropriate value. Since the plotting functions are called after the dimensions are set, one can now use <code>strheight</code> and <code>strwidth</code> to establish the text dimensions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">autotext</span> <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">labels</span>, <span class="va">d</span><span class="op">=</span><span class="fl">0.9</span>, <span class="va">...</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="va">cex</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="fl">1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/graphics/strwidth.html" class="external-link">strheight</a></span><span class="op">(</span><span class="va">labels</span><span class="op">)</span>, <span class="fl">1</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/graphics/strwidth.html" class="external-link">strwidth</a></span><span class="op">(</span><span class="va">labels</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="va">d</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">labels</span>, cex<span class="op">=</span><span class="va">cex</span>, <span class="va">...</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cyl</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">mtcars</span><span class="op">$</span><span class="va">cyl</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="va">cyl</span>, stacked<span class="op">=</span><span class="cn">FALSE</span>, gap<span class="op">=</span><span class="fl">1</span>, f<span class="op">=</span><span class="va">autotext</span>, labels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/legend.html" class="external-link">legend</a></span><span class="op">(</span><span class="st">"top"</span>, horiz<span class="op">=</span><span class="cn">TRUE</span>, bty<span class="op">=</span><span class="st">"n"</span>, inset<span class="op">=</span><span class="fl">0.9</span>, xpd<span class="op">=</span><span class="cn">TRUE</span>,</span>
<span>    legend<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, cex<span class="op">=</span><span class="fl">2</span>,</span>
<span>    fill<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/grDevices/palette.html" class="external-link">palette.colors</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">cyl</span><span class="op">)</span>, <span class="st">"Set 1"</span><span class="op">)</span>, border<span class="op">=</span><span class="cn">NA</span>,</span>
<span>    title<span class="op">=</span><span class="st">"Number of cylinders\n in 'mtcars'"</span>, title.font<span class="op">=</span><span class="fl">2</span>, title.cex<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span></code></pre></div>
<p><img src="baffle_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>This demonstrates how easy is to improve or convert existing functions to be perfectly useable by baffle.</p>
</div>
<div class="section level2">
<h2 id="bitmaps">Bitmaps<a class="anchor" aria-label="anchor" href="#bitmaps"></a>
</h2>
<p>To make things easier, <code>baffle</code> provides a wrapper around the base R’s <code>rasterImage</code> (in the <code>graphics</code> namespace) with the same interface as other shape functions.</p>
<p>To read raster images (such as <code>png</code>) use the lightweight <code>png</code> package. We then plot the original as well as a single colour representation of it using <code>waffle</code> and the <code>rasters</code> function.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="http://www.rforge.net/png/" class="external-link">"png"</a></span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"img/Rlogo.png"</span>, package<span class="op">=</span><span class="st">"png"</span><span class="op">)</span></span>
<span><span class="va">imgR</span> <span class="op">=</span> <span class="va">imgG</span> <span class="op">=</span> <span class="va">imgB</span> <span class="op">=</span> <span class="va">img</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/png/man/readPNG.html" class="external-link">readPNG</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span><span class="va">imgR</span><span class="op">[</span>,,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="va">imgG</span><span class="op">[</span>,,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="va">imgB</span><span class="op">[</span>,,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span> <span class="op">=</span> <span class="fl">0</span></span>
<span><span class="fu"><a href="../reference/waffle.html">waffle</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span>, f<span class="op">=</span><span class="va">rasters</span>, image<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">img</span>, <span class="va">imgR</span>, <span class="va">imgG</span>, <span class="va">imgB</span><span class="op">)</span>, rotate<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">30</span>,<span class="fl">60</span>,<span class="fl">90</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="baffle_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jiří Moravec.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
